{"version":3,"sources":["components/views/Search/Search.module.scss","components/views/Search/Search.tsx"],"names":["module","exports","Search","params","useParams","data","useStateContext","state","className","styles","container","content","grupper","length","GroupList","groupId","GroupDetails","id","t","useTranslation","React","useState","municipality","group","filter","setFilter","onlyUnique","value","index","self","indexOf","filterInput","e","target","name","console","log","kFilter","sub","toUpperCase","gFilter","searchResults","searchInputs","type","placeholder","onChange","onClick","block","document","getElementById","scrollIntoView","behavior","scrollToId","variant","label","list","filtered","map","g","k","sort","cardList","groupsByMunicipality","find","groupid","details","title","cards"],"mappings":"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","file":"static/js/9.201a783b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Search\":\"Search_Search__1zyzU\",\"content\":\"Search_content__QzrEC\",\"kommuneFilter\":\"Search_kommuneFilter__1PJMB\",\"title\":\"Search_title__-nbcE\",\"searchResults\":\"Search_searchResults__3TGSb\",\"cardList\":\"Search_cardList__21ayR\",\"searchInputs\":\"Search_searchInputs__2SILt\",\"groupsByMunicipality\":\"Search_groupsByMunicipality__2bUky\",\"list\":\"Search_list__VPnp1\",\"container\":\"Search_container__36pM6\"};","import React from 'react';\nimport styles from './Search.module.scss';\nimport { useParams } from 'react-router-dom';\nimport Card from 'components/ui/Card/Card';\nimport Button from 'components/ui/Button/Button';\nimport { useStateContext } from '_libs/_state';\nimport Loading from 'components/global/Loading/Loading';\nimport { useTranslation } from 'react-i18next';\n\nconst Search: React.FC = () => {\n  const params: { groupId?: string; } = useParams()\n  const { data } = useStateContext().state.state;\n\n  // React.useEffect(() => {\n  //   console.log( data );\n  // }, [data])\n  return (\n    <div className={styles.Search} data-testid=\"Search\">\n      <div className={`${styles.container} container`}>\n        <div className={`${styles.content} content`}>\n          {data.grupper.length > 0 ? <GroupList /> : <Loading />}\n          {params.groupId && data.grupper.length > 0 &&\n            <GroupDetails id={params.groupId} />\n          }\n        </div>\n      </div>\n    </div >\n\n  );\n}\n\nexport default Search;\n\nconst GroupList: React.FC = () => {\n  const  {t} = useTranslation('search')\n  // const {state, dispatch } = useStateContext()\n  const { data } = useStateContext().state.state;\n  const [filter, setFilter] = React.useState({\n    municipality: '',\n    group: '',\n  });\n\n  function onlyUnique(value: string, index: number, self: any) {\n    return self.indexOf(value) === index;\n  }\n\n  function scrollToId(id: string, block: \"center\" | \"end\" | \"nearest\" | \"start\" = \"center\") {\n    document.getElementById(id)?.scrollIntoView({ behavior: \"smooth\", block: block });\n  }\n\n\n  function filterInput(e: any) {\n    const { name, value } = e.target\n    console.log(name, value, filter.municipality)\n    setFilter({\n      ...filter,\n      [name]: name === 'municipality' && value === filter.municipality ? '' : value\n    })\n  }\n  function resetFilter(e: any) {\n    const { name } = e.target\n    setFilter({\n      ...filter,\n      [name]: ''\n    })\n  }\n\n\n  function kFilter(sub: string) {\n    return !filter.municipality ? true : sub.toUpperCase().indexOf(filter.municipality.toUpperCase()) > -1\n  }\n  // function kgFilter(sub: string) {\n  //   return !filter.municipality ? true : sub.toUpperCase().indexOf(filter.municipality.toUpperCase()) > -1\n  // }\n  function gFilter(sub: TGNFG) {\n    return !filter.group ? filter.municipality ? true : false : sub.name.toUpperCase().indexOf(filter.group.toUpperCase()) > -1\n  }\n  function gkFilter(sub: TGNFG) {\n    return !filter.group ? true : sub.name.toUpperCase().indexOf(filter.group.toUpperCase()) > -1\n  }\n\n\n  return (\n    <>\n      {/* <div id=\"kommuneSearch\" className={styles.kommuneFilter}>\n        <h1>Filtrer </h1>\n        <ul>\n          <li></li>\n          <li><label>Grupper: </label></li>\n          <li>{JSON.stringify(filter)}</li>\n        </ul>\n      </div> */}\n      <h1>{t('title')}</h1>\n      <div className={styles.searchResults}>\n        <div className={styles.searchInputs}>\n          <div><label>{t('groupSearch')}: </label><br />\n            <input type='text' name=\"group\" value={filter.group} placeholder='&#x1F50D;' onChange={filterInput} onClick={() => { scrollToId(\"kommuneSearch\", \"start\") }} />\n            <Button variant=\"singleCharClose\" label=\"x\" name=\"group\" onClick={resetFilter} />\n          </div>\n          {/* <div>\n            <label>{t('municipalitySearch')}: </label><br />\n            <input type='text' name=\"municipality\" value={filter.municipality} placeholder='&#x1F50D;' onChange={filterInput} onClick={() => { scrollToId(\"kommuneSearch\", \"start\") }} />\n            <Button label=\"x\" name=\"municipality\" onClick={resetFilter} />\n          </div> */}\n\n\n        </div>\n        <label>{t('municipalitySearch')}: </label><br />\n        <div className={`${styles.list} ${filter ? '' : styles.filtered}`}>\n          {data.grupper && \n          [...data.grupper\n            .filter(gkFilter)\n            .map((g) => g.municipality)\n            .filter(onlyUnique)\n            .filter(kFilter)\n            .filter((k) => k !== filter.municipality),\n            ...data.grupper\n            .map((g) => g.municipality)\n            .filter((k) => k === filter.municipality)\n            .filter(onlyUnique),\n          ]\n          .sort()\n          .map((k) =>\n              <Button key={k} \n              variant=\"secondary\" \n              className={[`${filter.municipality.toUpperCase() === k.toUpperCase() ? 'active' : ''}`]} \n              label={k} \n              name=\"municipality\" \n              value={k} \n              onClick={filterInput} />\n            )\n          }\n        </div>\n        <div className={styles.cardList}>\n            {data.grupper && data.grupper\n              .filter(gFilter)\n              .map((g) => g.municipality)\n              .filter(onlyUnique)\n              .filter(kFilter)\n              .sort()\n              .map((k) =>\n                <div key={k} className={styles.groupsByMunicipality}>\n                  <h4><span>{t('w.municipality')}: </span> {k}</h4>\n                  {data.grupper\n                    .filter(gFilter)\n                    .filter((g) => g.municipality === k)\n                    .map((g) =>\n                      <Card key={g.name} data={g} />\n                    )\n                  }\n                  {/* <Button key={g.name} label={g.name} name=\"group\" value={g.name} onClick={filterInput} />\n                    <Card key={g.name} data={g} /> */}\n                </div>\n              )}\n        </div>\n      </div>\n    </>\n  )\n}\n\nconst GroupDetails: React.FC<{ id: string }> = ({ id }) => {\n  const { data } = useStateContext().state.state;\n  const g: TGNFG | undefined = data.grupper.find((g) => g.groupid === id)\n  return (\n    <div className={styles.details}>\n      {g?.municipality &&\n        <>\n          <div className={styles.title}><h1>{g.municipality}</h1></div>\n          <div id={`cards`} className={styles.cards}>\n            <Card data={{ ...g }} />\n          </div>\n        </>\n      }\n    </div>\n  )\n}"],"sourceRoot":""}